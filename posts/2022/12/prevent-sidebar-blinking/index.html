<!doctype html><html lang=ko><head><meta charset=utf-8><meta http-equiv=content-type content="text/html"><meta name=viewport content="width=device-width,initial-scale=1"><title itemprop=name>사이드바야 그만 깜빡여라 | PrayinForRain.dev</title>
<meta property="og:title" content="사이드바야 그만 깜빡여라 | PrayinForRain.dev"><meta name=twitter:title content="사이드바야 그만 깜빡여라 | PrayinForRain.dev"><meta itemprop=name content="사이드바야 그만 깜빡여라 | PrayinForRain.dev"><meta name=application-name content="사이드바야 그만 깜빡여라 | PrayinForRain.dev"><meta property="og:site_name" content="PrayinforRain.dev"><meta name=description content="Dev blog of PrayinForRain, a KR frontend engineer"><meta itemprop=description content="Dev blog of PrayinForRain, a KR frontend engineer"><meta property="og:description" content="Dev blog of PrayinForRain, a KR frontend engineer"><meta name=twitter:description content="Dev blog of PrayinForRain, a KR frontend engineer"><meta property="og:locale" content="ko"><meta name=language content="ko"><link rel=alternate hreflang=ko href=https://prayinforrain.github.io/archived-blog/posts/2022/12/prevent-sidebar-blinking/ title><meta itemprop=image content="https://prayinforrain.github.io/archived-blog/avatar.png"><meta property="og:image" content="https://prayinforrain.github.io/archived-blog/avatar.png"><meta name=twitter:image content="https://prayinforrain.github.io/archived-blog/avatar.png"><meta name=twitter:image:src content="https://prayinforrain.github.io/archived-blog/avatar.png"><meta property="og:type" content="article"><meta property="og:article:published_time" content=2022-12-06T02:11:55+0900><meta property="article:published_time" content=2022-12-06T02:11:55+0900><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"사이드바야 그만 깜빡여라","author":{"@type":"Person","name":""},"datePublished":"2022-12-06","description":"","wordCount":744,"mainEntityOfPage":"True","dateModified":"2022-12-06","image":{"@type":"imageObject","url":""},"publisher":{"@type":"Organization","name":"PrayinForRain.dev"}}</script><meta name=generator content="Hugo 0.144.2"><link rel=canonical href=https://prayinforrain.github.io/archived-blog/posts/2022/12/prevent-sidebar-blinking/><link href=/archived-blog/style.min.d3ce0858bd620033d3d030dc7aec045940728e350ba4c481ec8623c110873b9b.css rel=stylesheet><link href=/archived-blog/code-highlight.min.731e9fc351d3c45d032fb5f574575c296f67e08c1c6229b5ccbfd7bfb18217c5.css rel=stylesheet><link rel=apple-touch-icon sizes=180x180 href=/archived-blog/icons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/archived-blog/icons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/archived-blog/icons/favicon-16x16.png><link rel=mask-icon href=/archived-blog/icons/safari-pinned-tab.svg><link rel="shortcut icon" href=/archived-blog/favicon.ico><link rel=manifest href=https://prayinforrain.github.io/archived-blog/site.webmanifest><meta name=msapplication-config content="/archived-blog/browserconfig.xml"><meta name=msapplication-TileColor content="#2d89ef"><meta name=theme-color content="#434648"><link rel=icon type=image/svg+xml href=/archived-blog/icons/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-63GYNX3VF5"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-63GYNX3VF5")}</script><script type=text/javascript src=//wcs.naver.net/wcslog.js></script><script type=text/javascript>if(!wcs_add)var wcs_add={};wcs_add.wa="1940c9395811670",window.wcs&&location.host==="prayinforrain.github.io/archived-blog"&&wcs_do()</script></head><body data-theme=auto class=notransition><script src=/archived-blog/js/theme.min.3fdbaaa09cc7a9064aa7a02b51d64ddc7f6ff91c83b5da563aaab72507749d7d.js integrity="sha256-P9uqoJzHqQZKp6ArUdZN3H9v+RyDtdpWOqq3JQd0nX0="></script><div class=navbar role=navigation><nav class=menu aria-label="Main Navigation"><a href=https://prayinforrain.github.io/archived-blog/ class=logo><svg width="25" height="25" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><title>Home</title><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
</a><input type=checkbox id=menu-trigger class=menu-trigger>
<label for=menu-trigger><span class=menu-icon><svg width="25" height="25" stroke="currentcolor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7H3.40726"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M.5 12.5V1.5c0-.552285.447715-1 1-1h11C13.0523.5 13.5.947715 13.5 1.5v11C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C.947715 13.5.5 13.0523.5 12.5z"/></svg></span></label><div class=trigger><ul class=trigger-container><li><a class=menu-link href=/archived-blog/>Home</a></li><li><a class="menu-link active" href=/archived-blog/posts/>Posts</a></li><li><a class=menu-link href=/archived-blog/tags/>Tags</a></li><li><a class=menu-link href=/archived-blog/about/>About</a></li><li class=menu-separator><span>|</span></li></ul><a id=mode href=#><svg class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg><svg class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg></a></div></nav></div><div class=archived-notice><p>이 블로그는 더 이상 업데이트되지 않습니다. <a href=https://prayinforrain.github.io/>새로운 블로그</a>를 방문해 주세요.</p></div><div class="wrapper post"><main class=page-content aria-label=Content><article><header class=header><h1 class=header-title>사이드바야 그만 깜빡여라</h1><div class=post-meta><time datetime=2022-12-06T02:11:55+09:00 itemprop=datePublished>2022. 12. 6.</time></div></header><details class=toc><summary><b>Table of Contents</b></summary><nav id=TableOfContents><ul><li><a href=#-tldr>🤷 TL;DR</a></li><li><a href=#-사이드바의-현재-상황>🤔 사이드바의 현재 상황</a></li><li><a href=#-메모야-도와줘>📝 메모야 도와줘</a></li><li><a href=#-next야-나는-너를-믿었어>➡️ Next야 나는 너를 믿었어</a></li><li><a href=#-refs>📖 Refs.</a></li></ul></nav></details><div class=page-content><p><strong>모헤윰</strong>의 프론트엔드 앱은 <code>Next.js</code>로 만들어져 있습니다. 팀원 그 누구도 사용해 본 적이 없음에도 굳이 선택한 이유는 <code>NestJS</code>를 써 보니 프레임워크를 사용하는 것이 협업 환경에서 코드 일관성을 지키는 데 도움을 줄 것이라는 막연한 기대와, <code>SSR</code>을 체험해 보고 싶은 학습적인 욕심이 있었습니다. 지금 돌아보니 ‘너와 함께 하길 잘 했어!’ 하는 감상은 없네요.</p><p>기왕 SSR을 체험한다고 시작한 프로젝트인 만큼, 성능에 신경을 쓰지 않을 수 없게 되었습니다. 그러다 제가 좋아하는 어떤 팀의 노션에서 <code>memoization</code>을 통한 컴포넌트 중복 렌더링 방지에 대한 글을 읽었는데요, 이 부분이 때 마침 <a href=https://www.notion.so/next-js-13-app-dir-11191a66a5564a25ba882c8a835afd13>Next.js 13을 적용하지 못해 포기해야만 했던</a> 아픈 상처를 자극하고 있어서 모헤윰에도 시도해 보기로 하였습니다.</p><h2 id=-tldr>🤷 TL;DR</h2><ul><li><code>useMemo</code>로 <code>memoization</code>하여도 context 값을 참조하면 리렌더링이 이루어진다.</li><li>크롬 개발자 도구나 React DevTools를 통해 리렌더링 정보를 확인할 수 있다.</li><li><code>Next.js</code>에서 <code>/pages/_app.tsx</code>에 들어간 컴포넌트는 리렌더링이 방지된다.</li></ul><h2 id=-사이드바의-현재-상황>🤔 사이드바의 현재 상황</h2><p>모헤윰은 Next.js가 요구하는 대로 pages 디렉토리에 각 페이지의 레이아웃을 컴포넌트의 조합으로 구성하고 있습니다. 아래 코드처럼요.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-tsx data-lang=tsx><span class=line><span class=cl><span class=c1>// index.tsx
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=k>default</span> <span class=kd>function</span> <span class=nx>Home() {</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>AuthGuard</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>Frame</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>SideBar</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>MainSection</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>Frame</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>AuthGuard</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>하지만 이런 식의 구현은 한 가지 결함이 있습니다. 아래 구현 결과를 보면..</p><p><img src=/archived-blog/images/posts/2022/12/prevent-sidebar-blinking/01-sidebar-blinking.gif alt=befe.gif></p><p>바로 사이드바가 각 페이지마다 하위 컴포넌트로 삽입되어 <strong>라우팅이 일어날 때 마다 새롭게 렌더링</strong>이 되고 있다는 문제인데요, 어차피 똑같이 생긴 사이드바인데 몇 번이고 다시 렌더링 하게 되는 것은 비효율 적일 뿐 아니라, 움짤에서 보이듯이 순간적인 깜빡임이 계속되고 있는 상황입니다. 아직 기능이 많지 않아 렌더링 몇 번 더 한다고 억울할 문제는 아니지만 깜빡임은 조금 참기가 힘들군요.</p><h2 id=-메모야-도와줘>📝 메모야 도와줘</h2><p>무엇이 문제일까요? 일단 저는 앞에서 언급한 글이 설명한 대로 <code>useMemo</code>를 통해 사이드바를 <code>memoize</code>하면 리렌더링을 멈추지 않을까 하는 생각에 사이드바 컴포넌트를 모조리 Memo로 변경하였습니다.</p><p>그러고 보니 리렌더링이 이루어지는 지를 조금 더 정확하게 확인할 방법이 없을까요? 리액트에서 제공하는 <code>React Devtools</code>를 사용하면 렌더링이 이루어지는 컴포넌트를 표시할 수 있다고 합니다. 한번 적용해서 같이 확인해 보겠습니다.</p><p><img src=/archived-blog/images/posts/2022/12/prevent-sidebar-blinking/02-sidebar-blinking.gif alt=memo.gif></p><p>음.. 초록 선이 마구 그어 지는 걸 보니 렌더링도 이루어지고 있고, 실제로도 깜빡임이 발생하고 있습니다. 우리는 결국 2022년에 사이드바가 깜빡이는 웹을 만드는 개발자가 될 수 밖에 없는 걸까요? 정말 속상하군요.</p><p>그런데 제가 봤던 글에는 이런 내용이 있었습니다.</p><blockquote><p><code>Context</code>의 값을 참조하고 있다면 <code>React.memo</code>로 컴포넌트를 <code>memoizaton</code>해도 리렌더링이 발생해요.</p></blockquote><p>사이드바에서 <code>Recoil</code>을 통해 전역 변수를 참조하는 부분이 있었지만 이를 제거하고 테스트해봐도 여전히 결과는 똑같았고, 저는 결국 <code>Next.js 13</code>때 <code>CSS-in-JS</code>가 <code>Context API</code>를 사용한다는 이야기를 들었던 기억이 떠올라, 결국 우리는 또 <code>Emotion</code>때문에 하나의 희망을 포기하게 되는구나, 하고 체념을 하게 되었습니다. 이모션 요놈 하나 때문에 잃게 되는 것이 정말 많군요.</p><h2 id=-next야-나는-너를-믿었어>➡️ Next야 나는 너를 믿었어</h2><p>하지만 여기서 포기하면 여태 쓴 글과 시간이 너무 아까웠습니다. 새 이슈를 처리하기엔 시간이 너무 애매했고 아쉬운 마음에 검색을 하던 중 몇 가지 글들을 발견했습니다.</p><blockquote><p>You can wrap your page component with your <code>Layout</code> component inside <code>_app.js</code>
, it should prevent it from re-mounting.</p></blockquote><p>정답은 <code>Next.js</code>가 가지고 있었군요. 모든 페이지를 렌더링 할때 사용되는 <code>_app.tsx</code>에 달아 놓은 컴포넌트는 리렌더링이 이루어지지 않는다는 내용인 것 같습니다. 이를 적용하기 위해서는 모든 페이지에 각각 달려있는 <code>Frame</code>과 <code>SideBar</code> 컴포넌트를 제거하고 <code>_app.tsx</code>로 이전하는 작업이 필요한데요, 이렇게 하면 <strong>공통된 레이아웃을 적용하기 위해 불필요하게 반복되는 코드의 양을 줄일 수 있는 이점</strong>까지 챙길 수 있습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-tsx data-lang=tsx><span class=line><span class=cl><span class=c1>// _app.tsx
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=k>default</span> <span class=kd>function</span> <span class=nx>App</span><span class=p>({</span> <span class=nx>Component</span><span class=p>,</span> <span class=nx>pageProps</span> <span class=p>}</span><span class=o>:</span> <span class=nx>AppProps</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>ThemeProvider</span> <span class=na>theme</span><span class=o>=</span><span class=p>{</span><span class=nx>theme</span><span class=p>}&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>RecoilRoot</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>Global</span> <span class=na>styles</span><span class=o>=</span><span class=p>{</span><span class=nx>globalStyle</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>AppStyle</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>Head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span><span class=nx>Moheyum</span><span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;/</span><span class=nt>Head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>Component</span> <span class=p>{</span><span class=na>...pageProps</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>AppStyle</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>RecoilRoot</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>ThemeProvider</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>바로 수정해 보겠습니다. 지금 <code>_app.tsx</code>는 위와 같은 상태입니다. 여기에 레이아웃의 영역을 제한하는 <code>Frame</code>과 오늘의 주인공인 <code>SideBar</code> 컴포넌트를 추가하되, 로그인과 회원가입 등 일부 컴포넌트에서는 사이드바가 보여서는 안됩니다. 이 부분은 <code>Router.pathname</code>으로 대조하여 예외 처리를 하도록 하겠습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-tsx data-lang=tsx><span class=line><span class=cl><span class=c1>// _app.tsx
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>NoSideBar</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;/login&#34;</span><span class=p>,</span> <span class=s2>&#34;/signup&#34;</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=kd>function</span> <span class=nx>App</span><span class=p>({</span> <span class=nx>Component</span><span class=p>,</span> <span class=nx>pageProps</span> <span class=p>}</span><span class=o>:</span> <span class=nx>AppProps</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>router</span> <span class=o>=</span> <span class=nx>useRouter</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>ThemeProvider</span> <span class=na>theme</span><span class=o>=</span><span class=p>{</span><span class=nx>theme</span><span class=p>}&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>RecoilRoot</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>Global</span> <span class=na>styles</span><span class=o>=</span><span class=p>{</span><span class=nx>globalStyle</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>AppStyle</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>Head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span><span class=nx>Moheyum</span><span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;/</span><span class=nt>Head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>Frame</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span><span class=o>!</span><span class=nx>NoSideBar</span><span class=p>.</span><span class=nx>includes</span><span class=p>(</span><span class=nx>router</span><span class=p>.</span><span class=nx>pathname</span><span class=p>)</span> <span class=o>&amp;&amp;</span> <span class=p>&lt;</span><span class=nt>SideBar</span> <span class=p>/&gt;}</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>ComponentWrapper</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>              <span class=p>&lt;</span><span class=nt>Component</span> <span class=p>{</span><span class=na>...pageProps</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;/</span><span class=nt>ComponentWrapper</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;/</span><span class=nt>Frame</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>AppStyle</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>RecoilRoot</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>ThemeProvider</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><code>_app.tsx</code>를 수정하고, <code>pages</code> 디렉토리 안의 모든 <code>SideBar</code>를 import하는 부분을 제거했습니다. 페이지 수가 더 많아지고 나서 했으면 손목에 무리가 왔을 것 같다는 생각이 들었습니다.</p><blockquote><p>💡 <strong>CSS-in-JS는 React DevTools에서 렌더링 정보를 잘못 보여준다?</strong><br>정확하지는 않은 정보이지만, React DevTools가 보여주는 리렌더링 정보가 실제 브라우저의 리렌더링과 다를 수 있다는 글을 봤습니다. 실제 리렌더링 상황을 보기 위해서는 크롬 개발자 도구의 <code>렌더링 → 페인트 플래시</code>를 체크해서 확인하라고 하네요.<br>리액트 데브툴과의 차이는 리액트의 virtual render와 브라우저의 native rerender를 보여주는 차이라고 하는데, 좀 더 알아볼 필요가 있어 보입니다.<br><img src=/archived-blog/images/posts/2022/12/prevent-sidebar-blinking/03-sidebar-blinking.png alt=Untitled></p></blockquote><p><img src=/archived-blog/images/posts/2022/12/prevent-sidebar-blinking/04-sidebar-blinking.gif alt=aftr.gif></p><p>브라우저의 페인트 플래시를 체크하고 확인해 보았습니다. gif 파일을 계속 하이라이트해서 정신이 사납지만, 아무튼 우측의 메인 섹션이 계속 리렌더링 되는 동안 사이드바 만큼은 한 번의 깜빡거림 없이 깔끔하게 작동함을 확인하였습니다. 이제 좀 낫네요!</p><h2 id=-refs>📖 Refs.</h2><p><a href=https://velog.io/@gth1123/re-rendering-conditions>re rendering conditions</a><br><a href=https://stackoverflow.com/questions/70531347/next-js-how-to-avoid-re-rendering-of-common-components-between-routed-pages>Next js how to avoid re-rendering of common components between routed pages?</a><br><a href=https://stackoverflow.com/questions/59519286/next-js-how-to-prevent-layout-get-re-mounted>NEXT JS - How to prevent layout get re-mounted?</a><br><a href=https://stackoverflow.com/questions/58987174/how-to-prevent-parent-component-from-re-rendering-with-react-next-js-ssr-two-p>How to prevent parent component from re-rendering with React (next.js) SSR two-pass rendering?</a><br><a href=https://www.notion.so/Component-memoization-feat-context-a4a73e27d15343e6b518a77c0c9d92b3>네?? Component를 memoization해도 리렌더링이 발생한다구요..?? 💦 (feat. context)</a></p></div></article><article id=giscus-wrapper></article><script>const giscus_light="https://cdn.jsdelivr.net/gh/prayinforrain/archived-blog@main/static/styles/_giscus.css",giscus_dark="https://cdn.jsdelivr.net/gh/prayinforrain/archived-blog@main/static/styles/_giscus_dark.css";let giscusTheme=localStorage.getItem("theme");giscusTheme||(giscusTheme="light",window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(defaultTheme="dark"));let giscusAttributes={src:"https://giscus.app/client.js","data-repo":"prayinforrain/archived-blog","data-repo-id":"R_kgDOItUJmA","data-category":"Announcements","data-category-id":"DIC_kwDOItUJmM4CTXa0","data-mapping":"pathname","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"top","data-theme":giscusTheme==="dark"?giscus_dark:giscus_light,"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([e,t])=>giscusScript.setAttribute(e,t)),document.getElementById("giscus-wrapper").appendChild(giscusScript)</script></main></div><footer class=footer><span class=footer_item></span>&nbsp;<div class=footer_social-icons><a href=https://github.com/prayinforrain target=_blank rel="noopener noreferrer me" title=Github><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a><a href=mailto:prayinforrain@naver.com target=_blank rel="noopener noreferrer me" title=Email><svg viewBox="0 0 24 21" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
</a><a href=index.xml target=_blank rel="noopener noreferrer me" title=Rss><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></div><small class=footer_copyright>© 2025 PrayinforRain.
Powered by <a href=https://github.com/hugo-sid/hugo-blog-awesome target=_blank rel="noreferrer noopener">Hugo blog awesome</a>
theme on
<a href=https://gohugo.io target=_blank rel="noreferrer noopener">Hugo</a>.</small></footer><a href=# title="Go to top" id=totop><svg width="48" height="48" fill="currentcolor" stroke="currentcolor" viewBox="0 96 960 960"><path d="M283 704.739 234.261 656 480 410.261 725.739 656 677 704.739l-197-197-197 197z"/></svg>
</a><script src=https://prayinforrain.github.io/archived-blog/js/main.min.35f435a5d8eac613c52daa28d8af544a4512337d3e95236e4a4978417b8dcb2f.js integrity="sha256-NfQ1pdjqxhPFLaoo2K9USkUSM30+lSNuSkl4QXuNyy8="></script><script src=https://prayinforrain.github.io/archived-blog/js/custom.min.d9a0ea0a65c1b01e922173e72cd81eedad8ae4b3ca9396e95f24b6e7d29a94c8.js integrity="sha256-2aDqCmXBsB6SIXPnLNge7a2K5LPKk5bpXyS259KalMg="></script></body></html>