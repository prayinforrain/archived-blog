<!doctype html><html lang=ko><head><meta charset=utf-8><meta http-equiv=content-type content="text/html"><meta name=viewport content="width=device-width,initial-scale=1"><title itemprop=name>npm vs yarn vs pnpm | PrayinForRain.dev</title><meta property="og:title" content="npm vs yarn vs pnpm | PrayinForRain.dev"><meta name=twitter:title content="npm vs yarn vs pnpm | PrayinForRain.dev"><meta itemprop=name content="npm vs yarn vs pnpm | PrayinForRain.dev"><meta name=application-name content="npm vs yarn vs pnpm | PrayinForRain.dev"><meta property="og:site_name" content="PrayinforRain.dev"><meta name=description content="Dev blog of PrayinForRain, a KR frontend engineer"><meta itemprop=description content="Dev blog of PrayinForRain, a KR frontend engineer"><meta property="og:description" content="Dev blog of PrayinForRain, a KR frontend engineer"><meta name=twitter:description content="Dev blog of PrayinForRain, a KR frontend engineer"><meta property="og:locale" content="ko"><meta name=language content="ko"><meta itemprop=image content="https://prayinforrain.github.io/"><meta property="og:image" content="https://prayinforrain.github.io/"><meta name=twitter:image content="https://prayinforrain.github.io/"><meta name=twitter:image:src content="https://prayinforrain.github.io/"><meta property="og:type" content="article"><meta property="og:article:published_time" content="2022-11-18T16:42:55+0900"><meta property="article:published_time" content="2022-11-18T16:42:55+0900"><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"npm vs yarn vs pnpm","author":{"@type":"Person","name":""},"datePublished":"2022-11-18","description":"","wordCount":645,"mainEntityOfPage":"True","dateModified":"2022-11-18","image":{"@type":"imageObject","url":""},"publisher":{"@type":"Organization","name":"PrayinForRain.dev"}}</script><meta name=generator content="Hugo 0.111.3"><link rel=canonical href=https://prayinforrain.github.io/posts/2022/11/npm-vs-yarn-vs-pnpm/><link href=/sass/main.min.27a708191572429134de748f5feceb8925c9beeb7bb0dd559b95db978cb12f9d.css rel=stylesheet><link href=/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css rel=stylesheet><link rel=apple-touch-icon sizes=180x180 href=/images/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon/favicon-16x16.png><link rel=manifest href=/images/favicon/site.webmanifest><link rel=mask-icon href=/images/favicon/safari-pinned-tab.svg color=#5bbad5><link rel="shortcut icon" href=/images/favicon/favicon.ico><meta name=msapplication-TileColor content="#2b5797"><meta name=msapplication-config content="/images/favicon/browserconfig.xml"><meta name=theme-color content="#ffffff"><link rel=icon type=image/svg+xml href=/images/favicon/favicon.svg></head><body data-theme=light class=notransition><script src=https://prayinforrain.github.io/js/themeLoader.min.fe2d3ab854403d53528fe10728c59913f3c42213733cee4310332048995e6bf5.js></script><div class=navbar role=navigation><nav class=menu aria-label="Main Navigation"><a href=/ class=logo><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><title>Home</title><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></a><input type=checkbox id=menu-trigger class=menu-trigger>
<label for=menu-trigger><span class=menu-icon><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentcolor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7H3.40726"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M.5 12.5V1.5c0-.552285.447715-1 1-1h11C13.0523.5 13.5.947715 13.5 1.5v11C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C.947715 13.5.5 13.0523.5 12.5z"/></svg></span></label><div class=trigger><ul class=trigger-container><li><a class=menu-link href=/>Home</a></li><li><a class="menu-link active" href=/posts/>Posts</a></li><li><a class=menu-link href=/tags/>Tags</a></li><li><a class=menu-link href=/about/>About</a></li><li class=menu-separator><span>|</span></li></ul><a id=mode href=#><svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg><svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg></a></div></nav></div><div class="wrapper post"><main class=page-content aria-label=Content><article><header class=header><h1 class=header-title>npm vs yarn vs pnpm</h1><div class=post-meta><time datetime=2022-11-18T16:42:55+09:00 itemprop=datePublished>2022. 11. 18.</time></div></header><div class=page-content><p>지금까지 저는 아무 의심 없이 npm을 사용해왔습니다. 이따금씩 <code>node_modules</code> 폴더가 저를 고통스럽게 했던 시간들이 있었지만, 프로젝트 초기화에 정말 이상한 행동만 하지 않으면 <code>npm i</code> 한 줄과 커피 한 잔으로 모든게 문제 없이 동작했으니까요. 하지만 우리는 슬랙의 어떤 분을 통해, npm보다 좋은 방법이 있음을 알고 있습니다. 이번 포스트에서는 <code>yarn</code>과 <code>pnpm</code>을 체험해 보도록 하겠습니다.</p><h1 id=-tldr>🤷 TL;DR</h1><ul><li>npm의 의존성 관리는 사실 매우 비효율적이다.</li><li>이 문제를 보완한 패키지 매니저가 yarn, pnpm이다.</li><li>각 패키지 매니저로의 마이그레이션은 매우 쉽다. 긍정적으로 고려해보자.</li></ul><h1 id=-npm>🎁 npm</h1><p><img src=/images/posts/2022/11/npm-vs-yarn-vs-pnpm/npm_vs_yarn_01.png alt=Untitled></p><p>우선 npm입니다. npm에 대해 더 할 이야기는 없지만, 우선 비교를 하기 위해 기준이 될 프로젝트의 의존성을 설치하고 실행까지 진행해 보겠습니다. 이번 글에서 실험할 프로젝트는 제가 개인적으로 사용하는 React boilerplate입니다. 어떤 것들을 포함하는지는 <a href=https://github.com/prayinforrain/ReactTS_Boilerplate_v2>레포지토리의 README.md</a>를 참고해 주세요.</p><p><img src=/images/posts/2022/11/npm-vs-yarn-vs-pnpm/npm_vs_yarn_02.png alt=Untitled></p><p>설치가 되었습니다. 이대로 <code>package.json</code>에 정의된 dev 명령어를 실행하면 리액트 서버에 접속할 수 있게 됩니다.</p><p><img src=/images/posts/2022/11/npm-vs-yarn-vs-pnpm/npm_vs_yarn_03.png alt=Untitled></p><p>무난하게 진행이 되었습니다.</p><h1 id=-yarn>🐈 Yarn</h1><p>Yarn의 가장 큰 특징은, 비교적 최근에 나온 버전인 Yarn berry의 PnP 전략을 통한 파일 관리입니다. npm은 기본적으로 패키지 A, B가 C를 참조한다면 프로젝트가 C를 직접 사용하지 않는다고 해도 C를 <code>node_modules</code> 디렉토리 최상위로 호이스팅하여 최적화를 진행합니다. 하지만 이 때 A, B가 참조하는 C의 버전이 다르다면 두 버전 중 하나만이 호이스팅되며, 이후 호이스팅되지 않은 버전을 참조하는 패키지가 많아지더라도 이 구조는 변경되지 않습니다. 즉 완전한 최적화는 되지 않습니다.</p><p>반면 Yarn berry에서는 패키지의 각 버전마다 하나의 .zip 파일로 설치되고, 앞서 말한 중복 설치 문제가 발생하지 않습니다. .zip 파일로 압축되면서 얻는 용량 상의 이점도 챙길 수 있습니다. 자세한 설명은 <a href=https://toss.tech/article/node-modules-and-yarn-berry>토스 기술 블로그</a>를 읽어보세요!</p><p>그럼 이제 <a href=https://yarnpkg.com/getting-started/install>Yarn 공식 문서</a>의 설명을 따라서 설치를 진행해 보겠습니다. NodeJS의 <code>Corepack</code> 기능을 이용해야 하는 모양인데, 노드 버전 16.10을 기준으로 추가 조치가 필요한 것 같습니다. 저는 NodeJS v16.16.0을 사용중이므로 별도 설치 없이 corepack을 활성화하겠습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-tsx data-lang=tsx><span class=line><span class=cl><span class=nx>corepack</span> <span class=nx>enable</span>
</span></span><span class=line><span class=cl><span class=nx>corepack</span> <span class=nx>prepare</span> <span class=nx>yarn</span><span class=kd>@3</span><span class=p>.</span><span class=mf>2.4</span> <span class=o>--</span><span class=nx>activate</span> <span class=c1>// yarn@stable 도 가능하다고 함
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>yarn</span> <span class=nx>init</span> <span class=o>-</span><span class=mi>2</span>
</span></span></code></pre></div><blockquote><p>💡 yarn init 뒤의 <code>-2</code> 라는 플래그가 <a href=https://yarnpkg.com/features/zero-installs>Zero-Installs</a>를 위한 템플릿으로 초기화해 주는 모양인데요, Yarn2 (Berry)의 가장 큰 특징 중 하나인 <code>node_modules</code>를 대체하는 PnP 패키지 관리를 사용하기 위해 해당 플래그를 사용하는 모양입니다. <code>-2</code>를 빼고 초기화해보니 <code>node_modules</code> 폴더를 사용하도록 되더라구요. Zero-Installs에 대한 내용은 <a href=https://www.zigae.com/yarn2/>여기</a>에 나와 있습니다.</p></blockquote><p>npm으로 했던 것처럼 boilerplate 파일을 방금 초기화한 yarn 디렉토리에 복사하고 <code>yarn install</code>을 실행합니다.</p><p><img src=/images/posts/2022/11/npm-vs-yarn-vs-pnpm/npm_vs_yarn_04.png alt=Untitled></p><p>뭔가 여러 단계를 거치는 듯한 메시지를 보여주다가 설치가 완료되었습니다. <code>.yarn/cache</code> 디렉토리에 패키지들이 .zip 파일로 압축되어 들어있네요.</p><p><img src=/images/posts/2022/11/npm-vs-yarn-vs-pnpm/npm_vs_yarn_05.png alt=Untitled></p><p><img src=/images/posts/2022/11/npm-vs-yarn-vs-pnpm/npm_vs_yarn_06.png alt=Untitled></p><p>음, 그런데 이 상태로 바로 서버를 실행시킬 수가 없습니다. ESLint 플러그인도 어디가 불편한지 비명을 지르고 있구요. 이유는 모르겠지만 <code>package.json</code>에는 명시되지 않은 peer-dependency 패키지들이 빠져 있어서 그런 것 같습니다. 다행히도 <code>package.json</code>에서 자동완성과 함께 버전까지 알아서 채워주어서 적당히 적어서 <code>yarn install</code>을 다시 진행했습니다. <a href=https://github.com/yarnpkg/yarn/issues/1503>이 문제</a>에 대한 이슈를 발견했지만 답을 구하지 못하고 결국 직접 하나씩 설치하는 식으로 해결했습니다.</p><p><img src=/images/posts/2022/11/npm-vs-yarn-vs-pnpm/npm_vs_yarn_07.png alt=Untitled></p><h1 id=-pnpm>🧊 pnpm</h1><p><img src=/images/posts/2022/11/npm-vs-yarn-vs-pnpm/npm_vs_yarn_08.png alt=Untitled></p><p><a href=https://pnpm.io/ko/installation>공식 문서</a>를 참고하였고, yarn과 별 차이 없이 corepack을 통해 설치했습니다. 명령어만 보면서 했는데 문득 보니 공식 문서가 영어가 반, 한국어가 반으로 되어 있었네요. 위 사진은 글을 읽지 않고 무작정 명령어 실행하면서 찍은 사진인데, Powershell이 뭔가 해해킹킹이이 되되ㄴ는 기분이 들어서 올렸습니다.</p><p><img src=/images/posts/2022/11/npm-vs-yarn-vs-pnpm/npm_vs_yarn_09.png alt=Untitled></p><p><code>pnpm install</code>을 실행하니, peer dependency 이슈에 대한 메시지를 띄워줍니다. yarn을 사용했을 때와 같은 문제가 있네요. <a href=https://stackoverflow.com/questions/70597494/pnpm-does-not-resolve-dependencies>이 링크</a>에서 답을 찾아 <code>pnpm i --shamefully-hoist=true</code>로 설치하니 알아서 피어 의존성 패키지를 같이 설치해 줍니다.</p><p><img src=/images/posts/2022/11/npm-vs-yarn-vs-pnpm/npm_vs_yarn_10.png alt=Untitled></p><p><img src=/images/posts/2022/11/npm-vs-yarn-vs-pnpm/npm_vs_yarn_11.png alt=Untitled></p><h1 id=-뭐가-다를까요>🤨 뭐가 다를까요..?</h1><p><img src=/images/posts/2022/11/npm-vs-yarn-vs-pnpm/npm_vs_yarn_12.png alt=Untitled></p><p>사실 이 정도 테스트로 차이를 느끼기는 어렵습니다. 그래도 짧은 시간동안 각 패키지 매니저를 체험해 봤으니, 그나마 눈에 띄는 차이를 정리해보겠습니다.</p><ul><li><code>npm</code>은 <strong>독보적으로 의존성 설치가 느리고, 무거웠습니다</strong>.</li><li><code>yarn</code>의 <strong>패키지 용량이 정말 가벼웠습니다</strong>. <code>pnpm</code>은 프로젝트가 크지 않기 때문인지, <code>npm</code>과 눈에 띄는 차이는 없었습니다.</li><li><code>pnpm</code>은 <strong>peer-dependency 문제를 해결할 수 있는 플래그</strong>를 지원해 주는 것이 좋았습니다. 사실 제가 겪은 문제가 일반적인 케이스는 아닌 것 같긴 합니다.</li><li>걱정이 많았던 <code>ESLint</code>는 의외로 금방 적용되었습니다. 마이그레이션 하는데는 문제가 없을 것이다, 라는 생각이 듭니다.</li></ul><p>보안이라던지, 성능이라던지 비교를 할 수 있으면 좋겠지만, 제 실험용 프로젝트에서는 유의미한 차이를 보이지 않았습니다. 다만 <code>package.json</code>에 정의된 npm scripts를 문제없이 실행해 준다는 점이 인상 깊었습니다. javascript에서 typescript로 옮겨갈 때보다 훨씬 친절하네요.</p><h1 id=-refs>📖 Refs.</h1><p><a href=https://github.com/yarnpkg/yarn/issues/1503>https://github.com/yarnpkg/yarn/issues/1503</a><br><a href=https://toss.tech/article/node-modules-and-yarn-berry>node_modules로부터 우리를 구원해 줄 Yarn Berry</a><br><a href=https://stackoverflow.com/questions/70597494/pnpm-does-not-resolve-dependencies>pnpm does not resolve dependencies</a><br><a href=https://velog.io/@dev_boku/JavaScript-%ED%8C%A8%ED%82%A4%EC%A7%80-%EB%A7%A4%EB%8B%88%EC%A0%80-%EB%B9%84%EA%B5%90-npm-Yarn-%EB%98%90%EB%8A%94-pnpm#%EC%84%B1%EB%8A%A5-%EB%B0%8F-%EB%94%94%EC%8A%A4%ED%81%AC-%EA%B3%B5%EA%B0%84-%ED%9A%A8%EC%9C%A8%EC%84%B1>[번역] JavaScript 패키지 매니저 비교 - npm, Yarn 또는 pnpm?</a><br><a href=https://yceffort.kr/2022/05/npm-vs-yarn-vs-pnpm#%EA%B2%B0%EB%A1%A0>npm, yarn, pnpm 비교해보기</a><br><a href=https://pnpm.io/ko/installation>설치하기 | pnpm</a><br><a href=https://yarnpkg.com/getting-started/install>Installation</a><br><a href=https://www.zigae.com/yarn2/>yarn berry(yarn2) 마이그레이션 방법</a><br><a href=https://kasterra.github.io/setting-yarn-berry/>yarn berry로 React.js 프로젝트 시작하기 | Kasterra&rsquo;s Archive</a><br>그리고 부스트 컨퍼런스 테크톡에서 멋진 발표를 해 주신 <strong>J166 이휘찬</strong> 캠퍼님께 감사드립니다 🙇</p></div></article><article id=giscus-wrapper></article><script>const giscus_light="https://cdn.jsdelivr.net/gh/prayinforrain/prayinforrain.github.io@main/static/styles/_giscus.css",giscus_dark="https://cdn.jsdelivr.net/gh/prayinforrain/prayinforrain.github.io@main/static/styles/_giscus_dark.css";let giscusTheme=localStorage.getItem("theme");giscusTheme||(giscusTheme="light",window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(defaultTheme="dark"));let giscusAttributes={src:"https://giscus.app/client.js","data-repo":"prayinforrain/prayinforrain.github.io","data-repo-id":"R_kgDOItUJmA","data-category":"Announcements","data-category-id":"DIC_kwDOItUJmM4CTXa0","data-mapping":"pathname","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"top","data-theme":giscusTheme==="dark"?giscus_dark:giscus_light,"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([e,t])=>giscusScript.setAttribute(e,t)),document.getElementById("giscus-wrapper").appendChild(giscusScript)</script></main></div><footer class=footer><span class=footer_item></span>&nbsp;<div class=footer_social-icons><a href=https://github.com/prayinforrain target=_blank rel="noopener noreferrer me" title=Github><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a href=mailto:prayinforrain@naver.com target=_blank rel="noopener noreferrer me" title=Email><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 21" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a><a href=index.xml target=_blank rel="noopener noreferrer me" title=Rss><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></div><small class=footer_copyright>© 2023 PrayinforRain.
Powered by <a href=https://github.com/hugo-sid/hugo-blog-awesome target=_blank rel="noreferrer noopener">Hugo blog awesome</a>
theme on
<a href=https://gohugo.io target=_blank rel="noreferrer noopener">Hugo</a>.</small></footer><script src=https://prayinforrain.github.io/js/themeSwitchnMenu.min.2a3c1435c7eb437003947a7d137c5976f629ecfbaad5fa4ed295bbaa16828f02.js></script></body></html>