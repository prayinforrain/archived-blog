<!doctype html><html lang=ko><head><meta charset=utf-8><meta http-equiv=content-type content="text/html"><meta name=viewport content="width=device-width,initial-scale=1"><title itemprop=name>넘블 OpenAI 단톡방 챌린지 - 프로젝트 회고 | PrayinForRain.dev</title><meta property="og:title" content="넘블 OpenAI 단톡방 챌린지 - 프로젝트 회고 | PrayinForRain.dev"><meta name=twitter:title content="넘블 OpenAI 단톡방 챌린지 - 프로젝트 회고 | PrayinForRain.dev"><meta itemprop=name content="넘블 OpenAI 단톡방 챌린지 - 프로젝트 회고 | PrayinForRain.dev"><meta name=application-name content="넘블 OpenAI 단톡방 챌린지 - 프로젝트 회고 | PrayinForRain.dev"><meta property="og:site_name" content="PrayinforRain.dev"><meta name=description content="Dev blog of PrayinForRain, a KR frontend engineer"><meta itemprop=description content="Dev blog of PrayinForRain, a KR frontend engineer"><meta property="og:description" content="Dev blog of PrayinForRain, a KR frontend engineer"><meta name=twitter:description content="Dev blog of PrayinForRain, a KR frontend engineer"><meta property="og:locale" content="ko"><meta name=language content="ko"><meta itemprop=image content="https://prayinforrain.github.io/"><meta property="og:image" content="https://prayinforrain.github.io/"><meta name=twitter:image content="https://prayinforrain.github.io/"><meta name=twitter:image:src content="https://prayinforrain.github.io/"><meta property="og:type" content="article"><meta property="og:article:published_time" content="2023-04-23T04:05:58+0900"><meta property="article:published_time" content="2023-04-23T04:05:58+0900"><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"넘블 OpenAI 단톡방 챌린지 - 프로젝트 회고","author":{"@type":"Person","name":""},"datePublished":"2023-04-23","description":"","wordCount":749,"mainEntityOfPage":"True","dateModified":"2023-04-23","image":{"@type":"imageObject","url":""},"publisher":{"@type":"Organization","name":"PrayinForRain.dev"}}</script><meta name=generator content="Hugo 0.111.3"><link rel=canonical href=https://prayinforrain.github.io/posts/2023/04/numble-talk/><link href=/sass/main.min.e4d4f518eeeba7b0bf52cd658af71930cea2e04d25637c90ead8d8d735282322.css rel=stylesheet><link href=/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css rel=stylesheet><link rel=apple-touch-icon sizes=180x180 href=/images/favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon/favicon-16x16.png><link rel=manifest href=/images/favicon/site.webmanifest><link rel=mask-icon href=/images/favicon/safari-pinned-tab.svg color=#5bbad5><link rel="shortcut icon" href=/images/favicon/favicon.ico><meta name=msapplication-TileColor content="#2b5797"><meta name=msapplication-config content="/images/favicon/browserconfig.xml"><meta name=theme-color content="#ffffff"><link rel=icon type=image/svg+xml href=/images/favicon/favicon.svg></head><body data-theme=light class=notransition><script src=https://prayinforrain.github.io/js/themeLoader.min.140eefb9a073e21a24011075415964d2538f5b645e315338ed956517c8d1c715.js></script><div class=navbar role=navigation><nav class=menu aria-label="Main Navigation"><a href=/ class=logo><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><title>Home</title><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></a><input type=checkbox id=menu-trigger class=menu-trigger>
<label for=menu-trigger><span class=menu-icon><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentcolor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7H3.40726"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M.5 12.5V1.5c0-.552285.447715-1 1-1h11C13.0523.5 13.5.947715 13.5 1.5v11C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C.947715 13.5.5 13.0523.5 12.5z"/></svg></span></label><div class=trigger><ul class=trigger-container><li><a class=menu-link href=/>Home</a></li><li><a class="menu-link active" href=/posts/>Posts</a></li><li><a class=menu-link href=/tags/>Tags</a></li><li><a class=menu-link href=/about/>About</a></li><li class=menu-separator><span>|</span></li></ul><a id=mode href=#><svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg><svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg></a></div></nav></div><div class="wrapper post"><main class=page-content aria-label=Content><article><header class=header><h1 class=header-title>넘블 OpenAI 단톡방 챌린지 - 프로젝트 회고</h1><div class=post-meta><time datetime=2023-04-23T04:05:58+09:00 itemprop=datePublished>2023. 4. 23.</time></div></header><div class=page-content><h1 id=시작하게-된-계기>시작하게 된 계기</h1><p><img src=/images/posts/2023/04/numble-talk/01.png alt="ui design"></p><p>3월에 정말 많은 일들이 있었다. 아직 뭔가 성과라고 내세울 결과물이 없긴 하지만 그래도 무의미하진 않았다(?)고 주장할 수 있는 그런 시간이었다. 점점 일이 정리가 되고 여유가 생기면서 번아웃이 온 사람처럼 푹 늘어지는 느낌이 있었는데, 그 와중에 누가 넘블을 소개해 주셨다.</p><p>대충.. 프로젝트 주제와 요구사항을 주고 구현을 해 보는? 프로세스의 활동으로 이해했다. 기간이 짧아 확 몰입하기 좋겠다는 생각을 해서 한 번 맛만 보기로 했다. OpenAI API를 활용해 보는 프로젝트라는 점이 관심을 끌기도 했다. 요새 챗쌤한테 이런저런 도움도 받았고 관련 아티클도 많이 보이고..</p><h1 id=맛을-보자>맛을 보자</h1><h2 id=스토리북을-쓰자>스토리북을 쓰자</h2><p>핵심 기능 외에도 storybook의 작성이 요구되었다. 다행히도 storybook은 지금 하고 있는 프로젝트에서 사용 경험이 있어서 비교적 가벼운 마음으로 접근할 수 있겠다 생각했는데.. storybook 설치부터 큰 문제가 있었다. 우선 프로젝트에서 요구하는 것이 Next.js였고, 내 개인적인 선호로 Yarn berry(PnP)를 사용하여 구성하려고 했었는데, Next.js 프로젝트에서 storybook을 사용하려면 특정 builder add-on을 사용해야 했고, 대충 이 근처 지점에서 오류가 발생해서 실행이 불가능했다. 내가 대충 짐작한 요인은 이랬다.</p><ul><li>최근에 업데이트된 storybook 7과 storybook/nextjs 빌더의 호환 문제</li><li>storybook 7과 yarn PnP의 호환 문제</li><li>Next.js 13에서 사용한다는 turbopack과의 호환 문제</li><li>내 컴퓨터 문제(이전에도 storybook 관련해서 내 컴퓨터 문제가 있었다)</li></ul><p>꽤 많은 레퍼런스를 찾아다니며 해결을 시도했지만 결국 Yarn PnP를 포기하는 것으로 해결되었다. PnP를 쓰지 않으면 지금 데스크탑이 꽤 느린 상태여서 조금 속상한 부분이 있었다. 이 내용은 나중에 정리가 된다면 다른 글로 정리하고 싶다.</p><aside><p><a href=https://prayinforrain.github.io/posts/2023/04/nextjs-storybook-with-pnp/>Next.js Storybook에 Yarn PnP 적용하기</a></p></aside><h2 id=openai와-친해지자>OpenAI와 친해지자</h2><p><img src=/images/posts/2023/04/numble-talk/02.png alt="결과물 사진"></p><p>챗썜을 제대로 모시기 위해서는 <a href=https://platform.openai.com/docs/api-reference>API 문서</a>를 읽어야 했다. 내가 직접 맨땅에서 문서를 정독하며 무언가 시작해 본 경험이 있던가? 아무튼 가뜩이나 미지의 영역인데 영어로 써있다는 점이 큰 걸림돌이 되었다.</p><p>다행히 내가 읽어야 하는 부분이 명확했고, 먼저 문서를 읽어 보신 선발대(?) 팀원 분들의 후기를 통해 꽤 괜찮은 지점에서 시작할 수 있었다. 걱정했던 것보다 금방 ChatGPT를 쓰는 느낌처럼 대화를 주고 받을 수 있었다.<br>문제는 단순히 1:1 대화만 하는 챗쌤을 어떻게 1:N, 그리고 ai끼리도 대화를 할 수 있도록 구현을 할까 하는 문제였다. 이런저런 고민을 하다가 <a href=https://community.openai.com/t/managing-messages-array-for-multi-user-chat-with-gpt-3-5-turbo/85976>OpenAI 커뮤니티 글</a>에서 힌트를 얻었다. 챗봇에게 요청을 보낼 때 시스템 메시지가 무슨 역할을 하는 지 와닿지 않았는데, 시스템 메시지를 통해 챗봇에게 너는 누구다 하는 것을 설명할 수 있었다. 이 메시지를 통해 내가 원하는 답을 얻어내면 될 것이라 생각했다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>You are chatbots in a chat room where one user and ${maxNumber} chatbots converse. Each message is in the format of number: content, where 0 represents the user&#39;s message and 1 to n represents the messages of the nth chatbot. You are responsible for assuming the role of all 1 to ${maxNumber} chatbots and participating actively in the conversation. Each chatbot can speak all at once, only a few at a time, or one chatbot can speak multiple times. Please format your response in number: content format, with each message separated by two line breaks.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 한글
</span></span><span class=line><span class=cl>당신은 유저 한 명과 ${maxNumber}개의 챗봇이 대화하는 채팅방의 챗봇입니다. 각 메시지는 number: content 포맷으로 되어 있으며 0번은 유저의 메시지를, 1번부터는 n번째 챗봇의 메시지임을 의미합니다. 당신은 1 ~ ${maxNumber}번 챗봇의 역할을 모두 맡아 대화합니다. 모든 챗봇이 말을 하거나, 일부만 할 수도 있으며, 한 챗봇이 여러 마디를 할 수도 있습니다. 응답 역시 number: content 포맷으로, 각 메시지는 두 번의 줄바꿈으로 구분하여 작성해 주세요.
</span></span></code></pre></div><p>한 번의 요청에서 주고받는 토큰 <em>(대충 메시지의 길이)</em> 수의 제한이 있어서, 지나치게 길지 않으면서도 내가 원하는 결과를 내도록 메시지를 넣었다. 학부생 때 <a href=https://www.gymlibrary.dev/>OpenAI Gym</a>을 해 본 경험이 조금 오버랩되면서 느낌이 묘했다. 얘야 이건 이렇게 답해야 한단다..<br>문제는 챗쌤이 기분에 따라 대답을 잘 해주기도, 기본적인 응답 포맷도 지키지 않는 일도 있어서 이런 예외를 발생시키지 않으려면 어떻게 해야 할지 고민을 많이 했다. 내가 시스템 메시지로 요구하는 내용 자체가 중의적으로 해석될 소지가 있는 것이 문제라고 생각해서 이것저것 바꾸면서 조절했다. 결과적으로는 항상 좋은 결과를 보여주진 않지만 적어도 메시지 포맷은 지켜서 이야기하도록 만드는데는 성공했다.</p><p>그리고 API 요청을 보낼 때.. 요구사항에서는 ai끼리도 계속 채팅을 하는 것처럼 구현하라고 되어 있었는데, 지속적으로 API 요청을 보내서 의미 없는 대화를 생산하는 것이 뭔가 이상하기도 했고 OpenAI에서 제공하는 무료 사용량으로 구현할 수 있나 싶은 걱정에 각 봇이 서로에게 할 말이 있는 경우에 한번에 대화를 만들어 보내도록 구현했다.</p><h2 id=좋은-팀>좋은 팀!</h2><p><img src=/images/posts/2023/04/numble-talk/03.png alt="bug issue"></p><p>과정을 혼자보다는 여럿이서 겪으면 더 얻는 게 있을 거란 생각에 팀에도 참여했다. 나와 비슷한 신입 분들이셨고, 정말 운 좋게도 서로 성격이 잘 맞아서 즐겁게 스크럼을 할 수 있었다. 다른 프로젝트와 겹치면서 막바지에 거의 해커톤 마인드(?)로 하다가 어떻게 스크럼 때 1차 배포까지 마치고 결과물을 보여드렸는데, 한 분이 버그까지 발견해 주기도 했다. 재밌는 경험이었다 ㅋㅋ..<br>너무 활기차고 적극적으로 함께 해 주셔서 너무 감사드려요!</p><h1 id=마치며>마치며</h1><p>생각보다 일정이 빡빡했고, 걱정보다는 할 만 했던 챌린지였다. 아쉬운 점이 있다면 챗쌤들이 기분에 따라 대화에 소극적으로 참여한다는 점과 <strong>API 테스트</strong>라는 것을 어떤 것을 어떻게 테스트해야 할지 감이 오지 않아서 구현하지 못한 것.. 어떻게 했어야 할까? 나중에 모범 사례라고 해야 하나.. 잘 하신 분들의 프로젝트가 공개된다면 한 번 보고 싶다.</p><p><a href=https://github.com/prayinforrain/numble-talk>넘블톡 레포지토리</a><br><a href=https://numble-talk.vercel.app/>넘블톡 배포 링크</a></p></div></article><article id=giscus-wrapper></article><script>const giscus_light="https://cdn.jsdelivr.net/gh/prayinforrain/prayinforrain.github.io@main/static/styles/_giscus.css",giscus_dark="https://cdn.jsdelivr.net/gh/prayinforrain/prayinforrain.github.io@main/static/styles/_giscus_dark.css";let giscusTheme=localStorage.getItem("theme");giscusTheme||(giscusTheme="light",window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(defaultTheme="dark"));let giscusAttributes={src:"https://giscus.app/client.js","data-repo":"prayinforrain/prayinforrain.github.io","data-repo-id":"R_kgDOItUJmA","data-category":"Announcements","data-category-id":"DIC_kwDOItUJmM4CTXa0","data-mapping":"pathname","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"top","data-theme":giscusTheme==="dark"?giscus_dark:giscus_light,"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([e,t])=>giscusScript.setAttribute(e,t)),document.getElementById("giscus-wrapper").appendChild(giscusScript)</script></main></div><footer class=footer><span class=footer_item></span>&nbsp;<div class=footer_social-icons><a href=https://github.com/prayinforrain target=_blank rel="noopener noreferrer me" title=Github><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a href=mailto:prayinforrain@naver.com target=_blank rel="noopener noreferrer me" title=Email><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 21" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a><a href=index.xml target=_blank rel="noopener noreferrer me" title=Rss><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></div><small class=footer_copyright>© 2023 PrayinforRain.
Powered by <a href=https://github.com/hugo-sid/hugo-blog-awesome target=_blank rel="noreferrer noopener">Hugo blog awesome</a>
theme on
<a href=https://gohugo.io target=_blank rel="noreferrer noopener">Hugo</a>.</small></footer><script src=https://prayinforrain.github.io/js/themeSwitchnMenu.min.2a3c1435c7eb437003947a7d137c5976f629ecfbaad5fa4ed295bbaa16828f02.js></script></body></html>